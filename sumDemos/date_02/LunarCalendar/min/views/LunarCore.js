(function(){function d(e){var t=h[e-o];return t[0]}function v(e){var t=h[e-o],n=t[0],r=t[3].toString(2),i=r.split("");for(var s=0;s<16-i.length;s++)i.unshift(0);var u=n?13:12,a=0,f=[];for(var s=0;s<u;s++)i[s]==0?(a+=29,f.push(29)):(a+=30,f.push(30));return{yearDays:a,monthDays:f}}function m(e,t){var n=v(e),r=t>0?t:n.yearDays-Math.abs(t),i=n.monthDays,s=0,o=0;for(var u=0;u<i.length;u++){s+=i[u];if(s>r){o=u,s-=i[u];break}}return[e,o,r-s+1]}function g(e,t,n){var r=h[e-o],i=r[1],s=r[2],u=y(e,i-1,s,e,t,n);if(u==0)return[e,0,1];var a=u>0?e:e-1;return m(a,u)}function y(e,t,n,r,i,s){var o=(new Date(e,t,n)).getTime(),u=(new Date(r,i,s)).getTime();return(u-o)/864e5}function b(e,t,n){var r=v(e),i=r.monthDays,s=0;for(var o=0;o<i.length;o++){if(!(o<t))break;s+=i[o]}return s+n-1}function w(e,t){var n=new Date(31556925974.7*(e-1890)+p[t]*6e4+Date.UTC(1890,0,5,16,2,31));return n.getUTCDate()}function E(e){var t={},n=0;for(var r=0;r<24;r++){var i=w(e,r);r%2==0&&n++,t[s(n-1,i)]=a.solarTerm[r]}return t}function S(e){var t=e-1890+25;return a.zodiac[t%12]}function x(e){return a.heavenlyStems[e%10]+a.earthlyBranches[e%12]}function T(e,t){return t=t||0,x(e-1890+25+t)}function N(e,t,n){return n=n||0,x((e-1890)*12+t+12+n)}function C(e,t,n){var r=Date.UTC(e,t,n)/864e5+29219+18;return x(r)}function k(e,t){var n=[31,L(e)?29:28,31,30,31,30,31,31,30,31,30,31];return n[t]}function L(e){return e%4==0&&e%100!=0||e%400==0}function A(e,t,r,i){var s=arguments.length,a=new Date;return e=s?parseInt(e,10):a.getFullYear(),t=s?parseInt(t-1,10):a.getMonth(),r=s?parseInt(r,10)||a.getDate():a.getDate(),e<(i?i:o+1)||e>u?{error:100,msg:n[100]}:{year:e,month:t,day:r}}function O(e,t,n){var r=A(e,t,n);if(r.error)return r;var i=r.year,s=r.month,u=r.day,a=b(i,s,u),f=h[i-o],l=f[1],c=f[2],p=(new Date(i,l-1,c)).getTime()+a*864e5;return p=new Date(p),{year:p.getFullYear(),month:p.getMonth()+1,day:p.getDate()}}function M(e,t,n){var r=A(e,t,n,o);if(r.error)return r;var u=r.year,h=r.month,p=r.day;i.setCurrent(u);var m=i.get("term2")?i.get("term2"):i.set("term2",w(u,2)),y=i.get("termList")?i.get("termList"):i.set("termList",E(u)),b=w(u,h*2),x=h>1||h==1&&p>=m?u+1:u,k=p>=b?h+1:h,L=g(u,h,p),O=d(L[0]),M="";O>0&&O==L[1]?M="闰"+a.monthCn[L[1]-1]+"月":O>0&&L[1]>O?M=a.monthCn[L[1]-1]+"月":M=a.monthCn[L[1]]+"月";var _="",D=v(L[0]).monthDays;L[1]==D.length-1&&L[2]==D[D.length-1]?_=c.d0100:O>0&&L[1]>O?_=c[s(L[1]-1,L[2])]:_=c[s(L[1],L[2])];var P={zodiac:S(x),GanZhiYear:T(x),GanZhiMonth:N(u,k),GanZhiDay:C(u,h,p),worktime:f["y"+u]&&f["y"+u][s(h,p)]?f["y"+u][s(h,p)]:0,term:y[s(h,p)],lunarYear:L[0],lunarMonth:L[1]+1,lunarDay:L[2],lunarMonthName:M,lunarDayName:a.dateCn[L[2]-1],lunarLeapMonth:O,solarFestival:l[s(h,p)],lunarFestival:_};return P}function _(t,n,r){var i=A(t,n);if(i.error)return i;var s=i.year,o=i.month,u=D(s,o+1,r);for(var a=0;a<u.monthData.length;a++){var f=u.monthData[a],l=M(f.year,f.month,f.day);e(u.monthData[a],l)}return u}function D(e,n,r){var i=A(e,n);if(i.error)return i;var s=i.year,o=i.month,u=new Date(s,o,1),a,f,l;firstDay=u.getDay()==0?6:u.getDay()-1;var c={firstDay:firstDay,monthDays:k(s,o),monthData:[]};c.monthData=t(s,o+1,c.monthDays,1);if(r){if(c.firstDay>0){var h=o-1<0?s-1:s,p=o-1<0?11:o-1;a=k(h,p),f=t(h,p+1,c.firstDay,a-c.firstDay+1),c.monthData=f.concat(c.monthData)}if(7*6-c.monthData.length!=0){var d=o+1>11?s+1:s,v=o+1>11?0:o+1,m=42-c.monthData.length;l=t(d,v+1,m,1),c.monthData=c.monthData.concat(l)}}return c}function P(t){e(f,t)}var e=function(e,t){if(e&&t&&typeof t=="object")for(var n in t)e[n]=t[n];return e},t=function(e,t,n,r){var i=[];r=r||0;if(n<1)return i;var s=r;for(var o=0;o<n;o++)i.push({year:e,month:t,day:s}),s++;return i},n={100:"输入的年份超过了可查询范围，仅支持1891至2100年",101:"参数输入错误，请查阅文档"},r=null,i={current:"",setCurrent:function(e){this.current!=e&&(this.current=e,this.clear())},set:function(e,t){return r||(r={}),r[e]=t,r[e]},get:function(e){return r||(r={}),r[e]},clear:function(){r=null}},s=function(e,t){return e+=1,e=e<10?"0"+e:e,t=t<10?"0"+t:t,"d"+e+t},o=1890,u=2100,a={heavenlyStems:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],earthlyBranches:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],zodiac:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],solarTerm:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],monthCn:["正","二","三","四","五","六","七","八","九","十","十一","十二"],dateCn:["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十","卅一"]},f={};f.y2013={d0101:2,d0102:2,d0103:2,d0105:1,d0106:1,d0209:2,d0210:2,d0211:2,d0212:2,d0213:2,d0214:2,d0215:2,d0216:1,d0217:1,d0404:2,d0405:2,d0406:2,d0407:1,d0427:1,d0428:1,d0429:2,d0430:2,d0501:2,d0608:1,d0609:1,d0610:2,d0611:2,d0612:2,d0919:2,d0920:2,d0921:2,d0922:1,d0929:1,d1001:2,d1002:2,d1003:2,d1004:2,d1005:2,d1006:2,d1007:2,d1012:1},f.y2014={d0101:2,d0126:1,d0131:2,d0201:2,d0202:2,d0203:2,d0204:2,d0205:2,d0206:2,d0208:1,d0405:2,d0407:2,d0501:2,d0502:2,d0503:2,d0504:1,d0602:2,d0908:2,d0928:1,d1001:2,d1002:2,d1003:2,d1004:2,d1005:2,d1006:2,d1007:2,d1011:1},f.y2015={d0101:2,d0102:2,d0103:2,d0104:1,d0218:2,d0219:2,d0220:2,d0221:2,d0222:2,d0223:2,d0224:2,d0215:1,d0225:1,d0226:1,d0227:1,d0228:1,d0404:2,d0405:2,d0406:2,d0501:2,d0502:2,d0503:2,d0620:2,d0621:2,d0622:2,d0926:2,d0927:2,d1001:2,d1002:2,d1003:2,d1004:2,d1005:2,d1006:2,d1007:2,d1008:1,d1009:1,d1010:1};var l={d0101:"元旦节",d0214:"情人节",d0308:"妇女节",d0312:"植树节",d0401:"愚人节",d0422:"地球日",d0501:"劳动节",d0504:"青年节",d0531:"无烟日",d0601:"儿童节",d0626:"禁毒日",d0701:"建党节",d0801:"建军节",d0808:"父亲节",d0908:"扫盲日",d0910:"教师节",d1001:"国庆节",d1006:"重阳节",d1111:"光棍节",d1224:"平安夜",d1225:"圣诞节"},c={d0101:"春节",d0115:"元宵节",d0202:"龙抬头",d0323:"妈祖生辰",d0505:"端午节",d0707:"七夕节",d0715:"中元节",d0815:"中秋节",d0909:"重阳节",d1015:"下元节",d1208:"腊八节",d1223:"小年",d0100:"除夕"},h=[[2,1,21,22184],[0,2,9,21936],[6,1,30,9656],[0,2,17,9584],[0,2,6,21168],[5,1,26,43344],[0,2,13,59728],[0,2,2,27296],[3,1,22,44368],[0,2,10,43856],[8,1,30,19304],[0,2,19,19168],[0,2,8,42352],[5,1,29,21096],[0,2,16,53856],[0,2,4,55632],[4,1,25,27304],[0,2,13,22176],[0,2,2,39632],[2,1,22,19176],[0,2,10,19168],[6,1,30,42200],[0,2,18,42192],[0,2,6,53840],[5,1,26,54568],[0,2,14,46400],[0,2,3,54944],[2,1,23,38608],[0,2,11,38320],[7,2,1,18872],[0,2,20,18800],[0,2,8,42160],[5,1,28,45656],[0,2,16,27216],[0,2,5,27968],[4,1,24,44456],[0,2,13,11104],[0,2,2,38256],[2,1,23,18808],[0,2,10,18800],[6,1,30,25776],[0,2,17,54432],[0,2,6,59984],[5,1,26,27976],[0,2,14,23248],[0,2,4,11104],[3,1,24,37744],[0,2,11,37600],[7,1,31,51560],[0,2,19,51536],[0,2,8,54432],[6,1,27,55888],[0,2,15,46416],[0,2,5,22176],[4,1,25,43736],[0,2,13,9680],[0,2,2,37584],[2,1,22,51544],[0,2,10,43344],[7,1,29,46248],[0,2,17,27808],[0,2,6,46416],[5,1,27,21928],[0,2,14,19872],[0,2,3,42416],[3,1,24,21176],[0,2,12,21168],[8,1,31,43344],[0,2,18,59728],[0,2,8,27296],[6,1,28,44368],[0,2,15,43856],[0,2,5,19296],[4,1,25,42352],[0,2,13,42352],[0,2,2,21088],[3,1,21,59696],[0,2,9,55632],[7,1,30,23208],[0,2,17,22176],[0,2,6,38608],[5,1,27,19176],[0,2,15,19152],[0,2,3,42192],[4,1,23,53864],[0,2,11,53840],[8,1,31,54568],[0,2,18,46400],[0,2,7,46752],[6,1,28,38608],[0,2,16,38320],[0,2,5,18864],[4,1,25,42168],[0,2,13,42160],[10,2,2,45656],[0,2,20,27216],[0,2,9,27968],[6,1,29,44448],[0,2,17,43872],[0,2,6,38256],[5,1,27,18808],[0,2,15,18800],[0,2,4,25776],[3,1,23,27216],[0,2,10,59984],[8,1,31,27432],[0,2,19,23232],[0,2,7,43872],[5,1,28,37736],[0,2,16,37600],[0,2,5,51552],[4,1,24,54440],[0,2,12,54432],[0,2,1,55888],[2,1,22,23208],[0,2,9,22176],[7,1,29,43736],[0,2,18,9680],[0,2,7,37584],[5,1,26,51544],[0,2,14,43344],[0,2,3,46240],[4,1,23,46416],[0,2,10,44368],[9,1,31,21928],[0,2,19,19360],[0,2,8,42416],[6,1,28,21176],[0,2,16,21168],[0,2,5,43312],[4,1,25,29864],[0,2,12,27296],[0,2,1,44368],[2,1,22,19880],[0,2,10,19296],[6,1,29,42352],[0,2,17,42208],[0,2,6,53856],[5,1,26,59696],[0,2,13,54576],[0,2,3,23200],[3,1,23,27472],[0,2,11,38608],[11,1,31,19176],[0,2,19,19152],[0,2,8,42192],[6,1,28,53848],[0,2,15,53840],[0,2,4,54560],[5,1,24,55968],[0,2,12,46496],[0,2,1,22224],[2,1,22,19160],[0,2,10,18864],[7,1,30,42168],[0,2,17,42160],[0,2,6,43600],[5,1,26,46376],[0,2,14,27936],[0,2,2,44448],[3,1,23,21936],[0,2,11,37744],[8,2,1,18808],[0,2,19,18800],[0,2,8,25776],[6,1,28,27216],[0,2,15,59984],[0,2,4,27424],[4,1,24,43872],[0,2,12,43744],[0,2,2,37600],[3,1,21,51568],[0,2,9,51552],[7,1,29,54440],[0,2,17,54432],[0,2,5,55888],[5,1,26,23208],[0,2,14,22176],[0,2,3,42704],[4,1,23,21224],[0,2,11,21200],[8,1,31,43352],[0,2,19,43344],[0,2,7,46240],[6,1,27,46416],[0,2,15,44368],[0,2,5,21920],[4,1,24,42448],[0,2,12,42416],[0,2,2,21168],[3,1,22,43320],[0,2,9,26928],[7,1,29,29336],[0,2,17,27296],[0,2,6,44368],[5,1,26,19880],[0,2,14,19296],[0,2,3,42352],[4,1,24,21104],[0,2,10,53856],[8,1,30,59696],[0,2,18,54560],[0,2,7,55968],[6,1,27,27472],[0,2,15,22224],[0,2,5,19168],[4,1,25,42216],[0,2,12,42192],[0,2,1,53584],[2,1,21,55592],[0,2,9,54560]],p=[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],H={solarToLunar:M,lunarToSolar:O,calendar:_,solarCalendar:D,setWorktime:P,getSolarMonthDays:k};typeof define=="function"?define([],function(){return H}):typeof exports=="object"?module.exports=H:window.LunarCalendar=H})();